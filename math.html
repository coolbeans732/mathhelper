<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Math Helper</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', sans-serif;
      background: linear-gradient(to bottom right, #f2f2ff, #d0e6ff);
      color: #333;
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
    }
    .container {
      max-width: 500px;
      width: 100%;
      background: #ffffff;
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 0 20px rgba(0,0,0,0.1);
    }
    h1 {
      text-align: center;
      font-size: 2em;
      margin-bottom: 10px;
      color: #4a90e2;
    }
    p {
      text-align: center;
      font-size: 1em;
      margin-bottom: 20px;
    }
    input {
      width: 100%;
      padding: 12px;
      font-size: 1em;
      border: 2px solid #4a90e2;
      border-radius: 10px;
      margin-bottom: 10px;
    }
    button {
      width: 100%;
      padding: 12px;
      font-size: 1em;
      background-color: #4a90e2;
      color: white;
      border: none;
      border-radius: 10px;
      cursor: pointer;
      margin-bottom: 10px;
    }
    button:hover {
      background-color: #357abd;
    }
    .result {
      margin-top: 20px;
      background: #e6f2ff;
      padding: 15px;
      border-radius: 10px;
      font-size: 1.1em;
      text-align: left;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>üî¢ Math Helper</h1>
    <p>Type a math question like:<br>
      <code>solve x^2 = 9</code><br>
      <code>make 3x + 2x simpler</code><br>
      <code>how fast is sin(x) changing</code><br>
      <code>what is 3 + 4 * 2</code>
    </p>

    <input type="text" id="queryInput" placeholder="Type your math question here...">
    <button onclick="processQuery()">Go</button>
    <button onclick="loadExample()">Try These</button>
    <button onclick="loadChallenge()">Math Challenge</button>

    <input type="text" id="answerInput" placeholder="Type your answer to check...">
    <button onclick="checkAnswer()">Am I Right?</button>

    <div class="result" id="resultBox">Your answer will show up here.</div>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/11.11.0/math.min.js"></script>
  <script>
    let lastCorrectAnswer = null;

    const examples = [
      "solve x^2 = 16",
      "make 2x + 5x simpler",
      "how fast is cos(x) changing",
      "what is 7 * (2 + 3)",
      "solve 3x + 2 = 11"
    ];

    const challenges = [
      "solve x^2 - 4x + 4 = 0",
      "make 5x - 2x + 3 simpler",
      "how fast is x^3 changing",
      "what is (8 + 2) * 5",
      "solve 2x + 3 = 2x + 7"
    ];

    function loadExample() {
      const random = examples[Math.floor(Math.random() * examples.length)];
      document.getElementById('queryInput').value = random;
      document.getElementById('answerInput').value = '';
      document.getElementById('resultBox').textContent = 'Your answer will show up here.';
    }

    function loadChallenge() {
      const random = challenges[Math.floor(Math.random() * challenges.length)];
      document.getElementById('queryInput').value = random;
      document.getElementById('answerInput').value = '';
      document.getElementById('resultBox').textContent = 'Your answer will show up here.';
    }

    function processQuery() {
      const input = document.getElementById('queryInput').value.trim().toLowerCase();
      const resultBox = document.getElementById('resultBox');
      let expr = '';
      let explanation = '';
      let output = '';

      try {
        if (input.includes('solve')) {
          expr = input.replace('solve', '').trim();
          const solution = math.solve(expr, 'x');
          lastCorrectAnswer = solution;
          explanation = `We figured out what number makes the equation true! It's like solving a puzzle where everything fits. You're doing awesome!`;
          output = `‚úÖ Answer: ${JSON.stringify(solution)}\nüìò Explanation: ${explanation}`;
        } else if (input.includes('simpler') || input.includes('make') || input.includes('clean')) {
          expr = input.replace(/make|simpler|clean/gi, '').trim();
          const simplified = math.simplify(expr).toString();
          lastCorrectAnswer = simplified;
          explanation = `We made the math shorter and easier to understand. You‚Äôre thinking like a math ninja‚Äîkeep it up!`;
          output = `üßπ Simpler form: ${simplified}\nüìò Explanation: ${explanation}`;
        } else if (input.includes('slope') || input.includes('change') || input.includes('speed')) {
          expr = input.replace(/find slope|slope|change|speed|how fast/gi, '').trim();
          const derivative = math.derivative(expr, 'x').toString();
          lastCorrectAnswer = derivative;
          explanation = `We checked how fast your math is changing‚Äîlike measuring the speed of a rollercoaster! You‚Äôre exploring deep math ideas‚Äîawesome!`;
          output = `üìê Slope: ${derivative}\nüìò Explanation: ${explanation}`;
        } else if (input.includes('what is') || input.includes('calculate') || input.includes('answer')) {
          expr = input.replace(/what is|calculate|answer|equals/gi, '').trim();
          const evaluated = math.evaluate(expr);
          lastCorrectAnswer = evaluated;
          explanation = `We followed the math rules step-by-step to get your final answer. It‚Äôs like solving a mystery with numbers‚Äîand you cracked it!`;
          output = `üéØ Result: ${evaluated}\nüìò Explanation: ${explanation}`;
        } else {
          output = `‚ö†Ô∏è Try using words like solve, make simpler, slope, or what is...`;
          lastCorrectAnswer = null;
        }

        resultBox.textContent = output;
      } catch (err) {
        resultBox.textContent = `‚ùå Error: ${err.message}`;
        lastCorrectAnswer = null;
      }
    }

    function checkAnswer() {
      const userAnswer = document.getElementById('answerInput').value.trim();
      const resultBox = document.getElementById('resultBox');

      if (lastCorrectAnswer === null) {
        resultBox.textContent = `‚ö†Ô∏è First run a math question, then check your answer!`;
        return;
      }

      let correct = false;

      if (Array.isArray(lastCorrectAnswer)) {
        correct = lastCorrectAnswer.includes(Number(userAnswer));
      } else {
        correct = String(lastCorrectAnswer).trim() === userAnswer;
      }

      if (correct) {
        resultBox.textContent += `\n‚úÖ You got it! That‚Äôs the right answer. üéâ`;
      } else {
        resultBox.textContent += `\n‚ùå Not quite. Try again or ask for help! üí°`;
      }
    }
  </script>
</body>
  </html>
